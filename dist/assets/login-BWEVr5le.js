import"./style-BD-upOib.js";let n=1;document.addEventListener("DOMContentLoaded",()=>{LoginClicked(),document.getElementById("login-submit-button").addEventListener("click",e=>{y(e)}),document.getElementById("register-submit-button").addEventListener("click",e=>{m(e)})});async function m(e){e.preventDefault();const i=document.getElementById("register-form"),t=i.querySelectorAll("input");if(t[0].setCustomValidity(""),!i.checkValidity()){i.reportValidity();return}let s=t[0].value,l=t[1].value,o=t[2].value,c=t[3].value;o!=c?(t[2].setCustomValidity("Please ensure both passwords are the same"),i.reportValidity()):t[2].setCustomValidity("");const a=await fetch("https://localhost:7168/api/LoginDetails/AddUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:s,Username:l,Password:o})});if(a.ok)document.cookie=`sessionId=${await a.text()}`,window.location.href="index.html";else{let d=await a.text();console.log(d),d[0]=="1"&&t[0].setCustomValidity("Email Already In Use"),d[1]=="1"&&t[1].setCustomValidity("Username Already In Use"),i.reportValidity()}}async function y(e){e.preventDefault();const i=document.getElementById("login-form"),t=i.querySelectorAll("input");if(t[0].setCustomValidity(""),!i.checkValidity()){i.reportValidity();return}let s=t[0].value,l=t[1].value;const o=await fetch("https://localhost:7168/api/LoginDetails/Login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Email:s,Username:"",Password:l})});o.ok?(document.cookie=`sessionId=${await o.text()}; max-age=${24*60*60}`,window.location.href="index.html"):(t[0].setCustomValidity("Password or username is incorrect"),t[0].classList.add("invalid"),t[1].classList.add("invalid"))}window.RegisterClicked=()=>{if(n!=1){n=1;const e=r();e[0].style.opacity=.2,e[1].style.opacity=1,document.getElementById("login-window").style.display="none",document.getElementById("register-window").style.display="block",document.getElementById("window-container").style.height="46rem"}};window.LoginClicked=()=>{if(n!=0){n=0;const e=r();e[0].style.opacity=1,e[1].style.opacity=.2,document.getElementById("register-window").style.display="none",document.getElementById("login-window").style.display="block",document.getElementById("window-container").style.height="37rem"}};window.ResetPassword=async()=>{const e=document.getElementById("email").value;console.log(e);const i=fetch(`https://localhost:7168/api/LoginDetails/ResetPassword?emailAddress="${e}"`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!i.ok){let t=(await i).text();alert(t)}};function r(){return document.getElementById("toggle-container").querySelectorAll("*")}window.RemoveInvalid=e=>{e.classList.remove("invalid")};
