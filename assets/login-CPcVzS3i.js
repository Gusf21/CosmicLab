import"./style-BD-upOib.js";let s=1;document.addEventListener("DOMContentLoaded",()=>{LoginClicked(),document.getElementById("login-submit-button").addEventListener("click",e=>{c(e)}),document.getElementById("register-submit-button").addEventListener("click",e=>{r(e)})});async function r(e){e.preventDefault();const i=document.getElementById("register-form"),t=i.querySelectorAll("input");if(t[0].setCustomValidity(""),!i.checkValidity()){i.reportValidity();return}let l=t[0].value,n=t[1].value,o=t[2].value;console.log(n),console.log(o),n!=o?(t[2].setCustomValidity("Please ensure both passwords are the same"),i.reportValidity()):t[2].setCustomValidity("");const a=await fetch("http://cosmiclabapi.co.uk:2030/api/LoginDetails/AddUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Username:l,Password:n})});a.ok?(document.cookie=`sessionId=${await a.text()}`,window.location.href="index.html"):(t[0].setCustomValidity("Username Already In Use"),i.reportValidity())}async function c(e){e.preventDefault();const i=document.getElementById("login-form"),t=i.querySelectorAll("input");if(t[0].setCustomValidity(""),!i.checkValidity()){i.reportValidity();return}let l=t[0].value,n=t[1].value;const o=await fetch("http://cosmiclabapi.co.uk:2030/api/LoginDetails/CheckLoginDetails",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Username:l,Password:n})});o.ok?(document.cookie=`sessionId=${await o.text()}; max-age=${24*60*60}`,window.location.href="index.html"):(t[0].setCustomValidity("Password or username is incorrect"),t[0].classList.add("invalid"),t[1].classList.add("invalid"))}window.RegisterClicked=()=>{if(s!=1){s=1;const e=d();e[0].style.opacity=.2,e[1].style.opacity=1,document.getElementById("login-window").style.display="none",document.getElementById("register-window").style.display="block",document.getElementById("window-container").style.height="45rem"}};window.LoginClicked=()=>{if(s!=0){s=0;const e=d();e[0].style.opacity=1,e[1].style.opacity=.2,document.getElementById("register-window").style.display="none",document.getElementById("login-window").style.display="block",document.getElementById("window-container").style.height="42rem"}};function d(){return document.getElementById("toggle-container").querySelectorAll("*")}window.RemoveInvalid=e=>{e.classList.remove("invalid")};
