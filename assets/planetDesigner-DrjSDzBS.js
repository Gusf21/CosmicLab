import"./style-BD-upOib.js";import{G as b}from"./cookies-lEVMIMuA.js";import{P as q,S as D,C as R,E as U,B as $,L as W,a as F,A as _,W as G,O as z,V as J}from"./OrbitControls-CiCO4lTP.js";let m=1,j="rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset",p=!1,C=[],L=[];document.addEventListener("DOMContentLoaded",async()=>{S("objects"),V()});window.DisplayAddUI=()=>{v(),p=!0;const l=document.getElementById("name-display");l.innerText="",l.dataset.id=Math.round(Math.random()*1e4);const e=document.getElementById("left-data"),a=document.getElementById("right-data"),o=document.getElementById("data-template");for(;e.firstChild;)e.removeChild(e.lastChild);for(;a.firstChild;)a.removeChild(a.lastChild);if(m==0){const i=document.getElementById("img-display");i.style.display="block",I(i,l.dataset.id,"planet");const s=o.content.cloneNode(!0),t=s.querySelectorAll("span");t[0].innerText="Type",t[1].innerText="Planet",t[1].classList.add("text-data"),s.querySelectorAll("div")[4].style.visibility="hidden",e.appendChild(s);const n=o.content.cloneNode(!0),d=n.querySelectorAll("span");d[0].innerText="Mass",d[1].classList.add("numerical-data"),d[1].id="mass",d[2].innerText="EM",d[3].innerText="1 EM is equal to the mass of Earth",e.appendChild(n);const r=o.content.cloneNode(!0),c=r.querySelectorAll("span");c[0].innerText="Radius",c[1].classList.add("numerical-data"),c[1].id="radius",c[2].innerText="ER",c[3].innerText="1 ER is equal to the radius of Earth",e.appendChild(r)}else m==1&&(document.getElementById("img-display").style.display="none",document.getElementById("render-window").style.visibility="visible",k());Edit()};function I(l,e,a){let o;if(a=="planet")o=`../images/planets/planet${M(parseInt(e),18)}.gif`;else if(a=="star")o=`../images/stars/star${M(parseInt(e),1)}.gif`;else return;l.setAttribute("src",o)}window.Cancel=()=>{if(P(),p)v();else{const l=document.getElementById("title-input"),e=O(l.dataset.id);if(m==0){const n=document.getElementById("img-display");I(n,e.objectId,e.type)}const a=document.createElement("a");a.classList.add("name"),a.id="name-display",a.dataset.id=m==0?e.objectId:e.orbitId,a.innerText=e.name,l.replaceWith(a);const o=document.getElementById("left-data"),i=document.getElementById("right-data"),s=o.getElementsByClassName("data-input"),t=i.getElementsByClassName("data-input");if(m==0){for(let r=0;r<=1;r++){let c=document.createElement("span");c.classList.add("numerical-data"),c.classList.add("data-display"),r==0?(c.innerText=e.mass,c.id="mass"):(c.innerText=e.radius,c.id="radius"),s[0].replaceWith(c)}const n=document.getElementsByClassName("data-display-container")[0],d=n.querySelectorAll("span");n.classList.remove("activate-border"),d[0].classList.remove("type-selected"),d[0].classList.remove("not-selected"),d[1].remove()}else if(m==1){for(let r=0;r<=2;r++){let c=document.createElement("span");switch(c.classList.add("numerical-data"),c.classList.add("data-display"),r){case 0:c.innerText=e.smAxis,c.id="semi-major-axis";break;case 1:c.innerText=e.eccentricity,c.id="eccentricity";break;case 2:c.innerText=e.inclination,c.id="inclination"}s[0].replaceWith(c)}for(let r=0;r<=1;r++){let c=document.createElement("span");switch(c.classList.add("numerical-data"),c.classList.add("data-display"),r){case 0:c.innerText=e.longOfAscNode,c.id="long-of-asc-node";break;case 1:c.innerText=e.argOfPeri,c.id="arg-of-peri"}t[0].replaceWith(c)}const n=document.getElementById("eccentricity-trigger");n.dataset.val=e.eccentricity,n.click();const d=document.getElementById("inclination-trigger");d.dataset.val=e.inclination,d.click()}document.getElementById("edit-button").style.visibility="visible",document.getElementById("button-container").style.visibility="hidden"}};window.Save=async()=>{const l=document.getElementById("left-data"),e=document.getElementById("right-data"),a=document.getElementById("title-input");let o;m==0&&(o=document.getElementsByClassName("type-selected")[0].innerText.toLowerCase());const i=l.getElementsByClassName("data-input"),s=e.getElementsByClassName("data-input"),t=a.value;let n=!0;a.classList.contains("invalid")&&(n=!1);for(let r of i)r.classList.contains("invalid")&&(n=!1);for(let r of s)r.classList.contains("invalid")&&(n=!1);let d;n&&(m==0?(p?await fetch(`http://94.4.213.191:2030/api/Data/CreateObject?sessionId=${b("sessionId").replace(/['"]+/g,"").toUpperCase()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Id:0,Name:t,Type:o,Mass:i[0].value,Radius:i[1].value})}):(d=O(a.dataset.id),d.name=t,d.type=o,d.mass=i[0].value,d.radius=i[1].value,await fetch(`http://94.4.213.191:2030/api/Data/EditObject?sessionId=${b("sessionId").replace(/['"]+/g,"").toUpperCase()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ObjectId:d.objectId,Username:d.username,OrbitId:d.orbitId,Type:d.type,Name:d.name,Mass:d.mass,Radius:d.radius})})),v(),S("objects")):m==1&&(p?await fetch(`http://94.4.213.191:2030/api/Data/CreateOrbit?sessionId=${b("sessionId").replace(/['"]+/g,"").toUpperCase()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Name:t,SMAxis:i[0].value,Eccentricity:i[1].value,Inclination:i[2].value,LongOfAscNode:s[0].value,ArgOfPeri:s[1].value})}):(d=O(a.dataset.id),d.name=t,d.smAxis=i[0].value,d.eccentricity=i[1].value,d.inclination=i[2].value,d.longOfAscNode=s[0].value,d.argOfPeri=s[1].value,await fetch(`http://94.4.213.191:2030/api/Data/EditOrbit?sessionId=${b("sessionId").replace(/['"]+/g,"").toUpperCase()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({OrbitId:d.orbitId,Username:d.username,Name:d.name,SMAxis:d.smAxis,Eccentricity:d.eccentricity,Inclination:d.inclination,LongOfAscNode:d.longOfAscNode,ArgOfPeri:d.argOfPeri})})),v(),S("orbits")))};window.SwitchType=()=>{const l=document.getElementsByClassName("not-selected")[0],e=document.getElementsByClassName("type-selected")[0];l.classList.remove("not-selected"),l.classList.add("type-selected"),e.classList.remove("type-selected"),e.classList.add("not-selected"),l.onclick=null,e.onclick=SwitchType;const a=document.getElementsByClassName("unit"),o=document.getElementsByClassName("tooltip-text"),i=document.getElementById("img-display"),s=document.getElementById("title-input").dataset.id;l.innerText=="Planet"?(a[1].innerText="EM",o[1].innerText="1 EM is equal to the mass of Earth",a[2].innerText="ER",o[2].innerText="1 ER is equal to the radius of Earth",I(i,s,"planet")):l.innerText=="Star"&&(a[1].innerText="SM",o[1].innerText="1 SM is equal to the mass of The Sun",a[2].innerText="SR",o[2].innerText="1 SR is equal to the radius of The Sun",I(i,s,"star"))};window.NoButtonIntent=l=>{const e=l.parentElement.parentElement,a=document.createElement("button");a.classList=l.dataset.classes,a.innerText=l.dataset.text,a.dataset.function=l.dataset.function,a.setAttribute("onclick","CheckButtonIntent(this)"),e.replaceWith(a)};window.CheckButtonIntent=l=>{const e=document.createElement("div"),a=document.createElement("span"),o=document.createElement("div"),i=document.createElement("button"),s=document.createElement("button");i.classList.add("yes"),s.classList.add("no"),i.setAttribute("onclick",l.dataset.function),s.setAttribute("onclick","NoButtonIntent(this)"),s.dataset.text=l.innerText,s.dataset.classes=l.classList,s.dataset.function=l.dataset.function,e.classList.add("check-intent-container"),e.appendChild(a),o.appendChild(i),o.appendChild(s),e.appendChild(o),a.innerText="Are you sure?",i.innerText="Yes",s.innerText="No",l.replaceWith(e)};window.Edit=l=>{const e=document.getElementById("left-data");document.getElementById("right-data");const a=document.getElementsByClassName("numerical-data"),o=document.getElementById("name-display"),i=document.createElement("input");if(i.classList.add("data-input-title"),p&&i.classList.add("invalid"),i.value=o.innerText,i.id="title-input",i.dataset.id=o.dataset.id,o.replaceWith(i),i.addEventListener("input",t=>{t.target.value!=""?t.target.classList.remove("invalid"):t.target.classList.add("invalid")}),m==0){const t=e.getElementsByClassName("text-data")[0];if(t.parentElement.classList.add("activate-border"),t.classList.add("type-selected"),t.innerText=="Star"){const n=document.createElement("span");n.classList.add("data-display"),n.classList.add("not-selected"),n.onclick=SwitchType,n.innerText="Planet",t.insertAdjacentElement("afterend",n)}else if(t.innerText=="Planet"){const n=document.createElement("span");n.classList.add("data-display"),n.classList.add("not-selected"),n.onclick=SwitchType,n.innerText="Star",t.insertAdjacentElement("afterend",n)}}const s=a.length;for(let t=0;t<s;t++){let n=document.createElement("input");n.classList.add("data-input"),p&&n.classList.add("invalid"),n.type="number",n.min="0",n.value=a[0].textContent,n.id=a[0].id,a[0].replaceWith(n)}m==0?(document.getElementById("mass").addEventListener("input",t=>{const n=t.target.value;n>0&&n!=""?t.target.classList.remove("invalid"):t.target.classList.add("invalid")}),document.getElementById("radius").addEventListener("input",t=>{const n=t.target.value;n>=0&&n!=""?t.target.classList.remove("invalid"):t.target.classList.add("invalid")})):m==1&&(document.getElementById("semi-major-axis").addEventListener("input",t=>{const n=t.target.value;n>=0&&n!=""?t.target.classList.remove("invalid"):t.target.classList.add("invalid")}),document.getElementById("eccentricity").addEventListener("input",t=>{const n=t.target.value;if(n>=0&&n<1&&n!=""){t.target.classList.remove("invalid");const d=document.getElementById("eccentricity-trigger");d.dataset.val=n,d.click()}else t.target.classList.add("invalid")}),document.getElementById("inclination").addEventListener("input",t=>{const n=t.target.value;if(n>=0&&n<=90&&n!=""){t.target.classList.remove("invalid");const d=document.getElementById("inclination-trigger");d.dataset.val=n,d.click()}else t.target.classList.add("invalid")}),document.getElementById("long-of-asc-node").addEventListener("input",t=>{t.target.value!=""?t.target.classList.remove("invalid"):t.target.classList.add("invalid")}),document.getElementById("arg-of-peri").addEventListener("input",t=>{t.target.value!=""?t.target.classList.remove("invalid"):t.target.classList.add("invalid")})),document.getElementById("button-container").style.visibility="visible",document.getElementById("edit-button").style.visibility="hidden"};window.Delete=async l=>{const e=document.getElementById("title-input").dataset.id;m==0?(await fetch(`http://94.4.213.191:2030/api/Data/DeleteObject?sessionId=${b("sessionId").replace(/['"]+/g,"").toUpperCase()}&objectId=${e}`,{method:"POST"}),v(),S("objects")):(await fetch(`http://94.4.213.191:2030/api/Data/DeleteOrbit?sessionId=${b("sessionId").replace(/['"]+/g,"").toUpperCase()}&orbitId=${e}`,{method:"POST"}),v(),S("orbits"))};async function S(l){const a=await(await fetch(`http://94.4.213.191:2030/api/Data/GetUserCreations?sessionId=${b("sessionId").replace(/['"]+/g,"").toUpperCase()}`)).json();C=a.Objects.sort((o,i)=>o.name.toLowerCase()<i.name.toLowerCase()?-1:o.name.toLowerCase()>i.name.toLowerCase()?1:0),L=a.Orbits,l=="objects"?SelectObjects():l=="orbits"&&SelectOrbits()}window.SelectObjects=()=>{const l=document.getElementById("objects"),e=document.getElementById("orbits");l.style.boxShadow=j,e.style.boxShadow="";const a=document.getElementById("tile-template"),o=document.getElementById("tile-container");let i=!1;for(;!i;)o.childElementCount==1&&(i=!0),o.removeChild(o.lastChild);C.forEach(s=>{const t=a.content.cloneNode(!0);t.querySelector("a").innerText=s.name.charAt(0).toUpperCase()+s.name.substring(1),t.querySelector("div").dataset.id=s.objectId,I(t.querySelector("img"),s.objectId,s.type),o.appendChild(t)}),m=0};window.SelectOrbits=()=>{const l=document.getElementById("objects"),e=document.getElementById("orbits");l.style.boxShadow="",e.style.boxShadow=j;const a=document.getElementById("tile-template"),o=document.getElementById("tile-container");let i=!1;for(;!i;)o.childElementCount==1&&(i=!0),o.removeChild(o.lastChild);L.forEach(s=>{const t=a.content.cloneNode(!0);t.querySelector("a").innerText=s.name.charAt(0).toUpperCase()+s.name.substring(1),t.querySelector("div").dataset.id=s.orbitId,I(t.querySelector("img"),s.orbitId,"orbit"),o.appendChild(t)}),m=1};function O(l){let e,a=0;if(m==0)for(;!e;){if(C[a].objectId==l&&(e=C[a]),a==C.length)return;a++}else for(;!e;){if(L[a].orbitId==l&&(e=L[a]),a==L.length)return;a++}return e}function v(){p=!1,P();const l=document.getElementById("left-data"),e=document.getElementById("right-data");for(;l.firstChild;)l.removeChild(l.lastChild);for(;e.firstChild;)e.removeChild(e.lastChild);try{const a=document.getElementById("title-input"),o=document.createElement("a");o.classList.add("name"),o.id="name-display",a.replaceWith(o)}catch{}document.getElementById("img-display").style.display="none",document.getElementById("edit-button").style.visibility="hidden",document.getElementById("render-window").style.visibility="hidden",document.getElementById("button-container").style.visibility="hidden"}function P(){const l=document.getElementsByClassName("check-intent-container");if(l.length!=0)for(let e=0;e<=l.length;e++){const a=l[0].getElementsByClassName("no")[0],o=document.createElement("button");o.innerText=a.dataset.text,o.dataset.function=a.dataset.function,o.classList=a.dataset.classes,o.setAttribute("onclick","CheckButtonIntent(this)"),l[0].replaceWith(o)}}window.TileClicked=l=>{v();const e=O(l.dataset.id),a=document.getElementById("name-display"),o=document.getElementById("img-display"),i=document.getElementById("edit-button");document.getElementById("button-container").style.visibility="hidden",document.getElementById("render-window").style.visibility="hidden",o.style.display="block",i.style.visibility="visible",a.innerText=e.name,a.dataset.id=l.dataset.id,m==0?I(o,l.dataset.id,e.type):o.style.display="none";const s=document.getElementById("left-data"),t=document.getElementById("right-data"),n=document.getElementById("data-template");for(document.getElementById("render-window").style.visibility="hidden";s.firstChild;)s.removeChild(s.lastChild);for(;t.firstChild;)t.removeChild(t.lastChild);if(m==0){const d=n.content.cloneNode(!0),r=d.querySelectorAll("span");r[0].innerText="Type",r[1].innerText=e.type.charAt(0).toUpperCase()+e.type.slice(1).toLowerCase(),r[1].classList.add("text-data"),d.querySelectorAll("div")[4].style.visibility="hidden",s.appendChild(d);const c=n.content.cloneNode(!0),g=c.querySelectorAll("span");g[0].innerText="Mass",g[1].innerText=e.mass,g[1].id="mass",g[1].classList.add("numerical-data"),e.type=="planet"?(g[2].innerText="EM",g[3].innerText="1 EM is equal to the mass of Earth"):(g[2].innerText="SM",g[3].innerText="1 SM is equal to the mass of The Sun"),s.appendChild(c);const N=n.content.cloneNode(!0),h=N.querySelectorAll("span");h[0].innerText="Radius",h[1].innerText=e.radius,h[1].id="radius",h[1].classList.add("numerical-data"),e.type=="planet"?(h[2].innerText="ER",h[3].innerText="1 ER is equal to the radius of Earth"):(h[2].innerText="SR",h[3].innerText="1 SR is equal to the radius of The Sun"),s.appendChild(N)}else if(m==1){k(e),document.getElementById("render-window").style.visibility="visible";const d=document.getElementById("eccentricity-trigger");d.dataset.val=document.getElementById("eccentricity").innerText;const r=document.getElementById("inclination-trigger");r.dataset.val=document.getElementById("inclination").innerText,d.click(),r.click()}};function k(l){const e=document.getElementById("left-data"),a=document.getElementById("right-data"),o=document.getElementById("data-template"),i=[];i.push([`
Semi-Major Axis`,p?"":l.smAxis,"AU","One AU is one astronomical unit, which is the distance from The Sun to the Earth, and is approximately 150,000,000 km"]),i.push([`
Eccentricity`,p?"":l.eccentricity,"","Eccentricity is a 0 - 1 value that controls how close to a circle the ellipitical path is. Values closer to 0 are more circular"]),i.push([`
Incinlation`,p?"":l.inclination,"Degree","The inclination is how far above the horizontal plane the orbit is rotated"]),i.push([`Longitude Of
Ascending Node`,p?"":l.longOfAscNode,"Degree","The longitude of the ascending node is how far around the y-axis the whole orbit is rotated"]),i.push([`Argument Of
Periapsis`,p?"":l.argOfPeri,"Degree","The arguement of periapsis is the angle around the orbit that the furthest point from the center object is located"]);for(let s=0;s<Math.ceil(i.length/2);s++){let t=o.content.cloneNode(!0),n=t.querySelectorAll("span");switch(n[0].innerText=i[s][0],n[1].innerText=i[s][1],n[1].classList.add("numerical-data"),n[2].innerText=i[s][2],n[3].innerText=i[s][3],s){case 0:n[1].id="semi-major-axis";break;case 1:n[1].id="eccentricity";break;case 2:n[1].id="inclination"}e.appendChild(t)}for(let s=Math.ceil(i.length/2);s<i.length;s++){let t=o.content.cloneNode(!0),n=t.querySelectorAll("span");switch(n[0].innerText=i[s][0],n[1].innerText=i[s][1],n[1].classList.add("numerical-data"),n[2].innerText=i[s][2],n[3].innerText=i[s][3],a.appendChild(t),s){case Math.ceil(i.length/2):n[1].id="long-of-asc-node";break;case Math.ceil(i.length/2)+1:n[1].id="arg-of-peri"}}}function M(l,e,a=7.5,o=6,i=600){return Math.round(Math.pow(Math.sin(a*l+o),2)*i%e)+1}window.UpdateDisplay=l=>{let e=l.value,a=[];m==0?C.forEach(t=>{t.name.toLowerCase().includes(e.toLowerCase())||a.push(t.objectId)}):L.forEach(t=>{t.name.toLowerCase().includes(e.toLowerCase())||a.push(t.orbitId)});const i=document.getElementById("tile-container").children;for(var s=0;s<i.length;s++)a.includes(parseInt(i[s].dataset.id))?i[s].style.display="none":i[s].style.display="flex"};function V(){const l=document.getElementById("star-container"),e=200+Math.round(Math.random()*200);for(let a=0;a<e;a++){const o=document.createElement("div");o.classList.add("star");const i=Math.random()*100,s=Math.random()*100;o.style.left=`${i}%`,o.style.top=`${s}%`,l.appendChild(o)}}let T,y,w,u,x,B,f,E,A;H();function H(){const l=document.getElementById("star-container"),e=16/9;T=new q(60,e,1,2e3),T.position.z=200,T.position.y=200,w=new D,w.background=new R(462867),E=.5,A=0,f=100;const a=Math.sqrt(f*f*(1-E*E));B=new U(f*E,0,f,a,0,2*Math.PI,!1,Math.PI);const o=B.getPoints(50),i=new $().setFromPoints(o),s=new W({color:16777215});x=new F(i,s),x.rotation.x=Math.PI*.5,x.rotation.y=A,w.add(x);const t=new _(1e4);w.add(t),u=new G({antialias:!0}),u.setPixelRatio(window.devicePixelRatio),u.setSize(16*20,9*20),u.setAnimationLoop(Y),l.appendChild(u.domElement),u.domElement.id="render-window",u.domElement.style.visibility="hidden",u.domElement.style.position="absolute",u.domElement.style.top="60%",u.domElement.style.left="50%",u.domElement.style.transform="translate(-50%, -50%)";const n=document.getElementById("eccentricity-trigger"),d=document.getElementById("inclination-trigger");n.addEventListener("click",r=>{E=parseFloat(r.target.dataset.val);const c=Math.sqrt(f*f*(1-E*E));B.yRadius=c,B.aX=f*E,x.geometry.setFromPoints(B.getPoints(50))}),d.addEventListener("click",r=>{A=parseFloat(r.target.dataset.val)*Math.PI/180,x.rotation.y=A}),X(T)}function X(l){y=new z(l,u.domElement),y.target=new J(0,0,0),y.minPolarAngle=Math.PI/8,y.maxPolarAngle=Math.PI-Math.PI/8,y.minDistance=140,y.maxDistance=250,y.zoomSpeed=.3,y.rotateSpeed=.3,y.enablePan=!1}function Y(){y.update(),K()}function K(){u.render(w,T)}
